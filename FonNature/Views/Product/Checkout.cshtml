@model Models.Entity.Customer
@{
    ViewBag.Title = "CheckOut";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@section jsFooter{
    <script>
        $('#orderButtonAjax').off('click').on('click', function (e) {
            var cartItemsList = JSON.parse(localStorage.getItem("cartItemsList"));
            if (cartItemsList == null) {
                window.alert('Cart is empty!')
                return;
            }
            $.ajax({
                url: "/Product/AddCart",
                data: { data: JSON.stringify(cartItemsList) },
                dataType: "json",
                type: "POST",
                success: function (res) {
                    if (res) {
                        $('#orderButtonPostBack').click();
                        console.log(res);
                    }
                    else {
                        console.log(res.product);
                    }
                }
            });
        });
    </script>
    <script>
        (function () {
            'use strict';
            window.addEventListener('load', function () {
                // Fetch all the forms we want to apply custom Bootstrap validation styles to
                var forms = document.getElementsByClassName('needs-validation');
                // Loop over them and prevent submission
                var validation = Array.prototype.filter.call(forms, function (form) {
                    form.addEventListener('submit', function (event) {
                        if (form.checkValidity() === false) {
                            $(window).scrollTop(300);
                            event.preventDefault();
                            event.stopPropagation();
                            //$('#theFormId').submit();
                        }
                        form.classList.add('was-validated');
                    }, false);
                });
            }, false);
        })();
    </script>
    <script>
        $('[name="payment-method"]').on('click', function () {

            var $value = $(this).attr('value');

            $('.single-method p').slideUp();
            $('[data-method="' + $value + '"]').slideDown();

        })
    </script>
}
<!-- Page Banner Section Start -->
<div class="title-page" style="background-image: url(/Asset/Spa/images/title-page-01.jpg);">
    <div class="container">
        <h1 class="main-title">
            Check Out
        </h1>
    </div>
</div>
<!-- Page Banner Section End -->
<!--Checkout section start-->
<div style="margin-top:40px;" class="checkout-section section pt-100 pt-lg-80 pt-md-70 pt-sm-60 pt-xs-50  pb-70 pb-lg-50 pb-md-40 pb-sm-30 pb-xs-20">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <!-- Checkout Form Start-->
                @using (Html.BeginForm("Checkout", "Product", FormMethod.Post, new { @class = "checkout-form needs-validation", @novalidate = "novalidate" }))
                {
                    <div class="row row-40">
                        <div class="col-lg-7">
                            <!-- Billing Address -->
                            <div id="billing-form" class="mb-10">
                                <h4 class="checkout-title">Shipping Address</h4>
                                <div class="row">
                                    <div class="col-12 mb-20">
                                        <label>Full Name*</label>
                                        @Html.EditorFor(model => model.Name, new { htmlAttributes = new { @class = "form-control", @placeholder = "Họ và tên", @type = "text", @id = "validationCustom01", @required = "required" } })
                                        @Html.ValidationMessageFor(model => model.Name, "", new { @class = "text-danger" })
                                        <div class="invalid-feedback">
                                            Vui lòng điền họ và tên!
                                        </div>
                                        <div class="valid-feedback">
                                            Valid!
                                        </div>
                                    </div>

                                    <div class="col-md-6 col-12 mb-20">
                                        <label>Email*</label>
                                        @Html.EditorFor(model => model.email, new { htmlAttributes = new { @class = "form-control", @placeholder = "Email", @type = "email", @id = "validationCustom02", @required = "required" } })
                                        @Html.ValidationMessageFor(model => model.email, "", new { @class = "text-danger" })
                                        <div class="invalid-feedback">
                                            Please input valid email!
                                        </div>
                                        <div class="valid-feedback">
                                            Valid!
                                        </div>
                                    </div>

                                    <div class="col-md-6 col-12 mb-20">
                                        <label>Mobile Phone*</label>
                                        @Html.EditorFor(model => model.phone, new { htmlAttributes = new { @class = "form-control", @placeholder = "Số điện thoại", @pattern = "(0[3|5|7|8|9])+([0-9]{8})", @type = "phone", @id = "validationCustom03", @required = "required" } })
                                        @Html.ValidationMessageFor(model => model.phone, "", new { @class = "text-danger" })
                                        <div class="invalid-feedback">
                                            Please input valid mobile phone!
                                        </div>
                                        <div class="valid-feedback">
                                            Valid!
                                        </div>
                                    </div>

                                    <div class="col-12 mb-20">
                                        <label>Address*</label>
                                        @Html.EditorFor(model => model.address, new { htmlAttributes = new { @class = "form-control", @placeholder = "Địa chỉ", @type = "text", @id = "validationCustom04", @required = "required" } })
                                        @Html.ValidationMessageFor(model => model.address, "", new { @class = "text-danger" })
                                        <div class="invalid-feedback">
                                            Please input valid address!
                                        </div>
                                        <div class="valid-feedback">
                                            Valid!
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-5">
                            <div class="row">

                                <!-- Cart Total -->
                                <div class="col-12 mb-60">

                                    <h4 class="checkout-title">Cart Total</h4>

                                    <div class="checkout-cart-total">

                                        <h4>Product <span>Total</span></h4>

                                        <ul style="padding-left: 0px !important;" id="checkoutCartItem"></ul>

                                        <p>Sub Total <span id="subTotalInCheckout">$0</span></p>
                                        <p>Shipping fee <span>$0</span></p>
                                        <h4>Grand Total <span id="grandTotalInCheckout">$0</span></h4>

                                    </div>

                                </div>

                                <!-- Payment Method -->
                                <div style="margin-top:40px;" class="col-12 mb-30">

                                    <h4 class="checkout-title">Payment Method</h4>

                                    <div class="checkout-payment-method">
                                        <div class="single-method">
                                            <input type="radio" id="payment_bank" name="payment-method" value="bank" checked>
                                            <label for="payment_bank">Direct Bank Transfer</label>
                                            <p data-method="bank">Bank Transfer Information: <br />Bank Id: 0231000582588 <br /> Bank Name: Techcombank <br />Account Name: Phạm Thùy Vân</p>
                                        </div>
                                        <div class="single-method">
                                            <input type="radio" id="payment_cash" name="payment-method" value="cash">
                                            <label for="payment_cash">Cash on delivery</label>
                                            <p data-method="cash">Payment by cash when receive product</p>
                                        </div>
                                        <div style="color:#FFFFFF !important" class="form-group">
                                            <div class="form-check pl-0">
                                                <input class="form-check-input" type="checkbox" value="" id="invalidCheck266" required>
                                                <label class="form-check-label" for="invalidCheck266">Agree to terms and conditions</label>
                                                <div class="invalid-feedback">You must agree terms and conditions!</div>
                                            </div>
                                        </div>
                                    </div>
                                    <a id="orderButtonAjax" href="javascript:void(0)" class="place-order btn btn-lg btn-round">Đặt hàng</a>
                                    <button hidden id="orderButtonPostBack" class="place-order btn btn-lg btn-round">Đặt hàng</button>
                                </div>

                            </div>
                        </div>

                    </div>
                }
            </div>
        </div>
    </div>
</div>
<!--Checkout section end-->
